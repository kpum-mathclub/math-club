<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <title>Contact | 数学研究部</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <!-- p5.js -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.6.0/p5.min.js"></script>
  <!-- 明朝体フォント -->
  <link href="https://fonts.googleapis.com/css2?family=Noto+Serif+JP:wght@400;700&display=swap" rel="stylesheet">

  <style>
    :root{
      --bg:#0a0d12;         /* 深い宇宙色 */
      --fg:#e8ecf3;
      --muted:#9aa3af;
      --glass:rgba(255,255,255,0.08);
      --border:rgba(255,255,255,0.18);
      --accent:#54d6a3;     /* ネオングリーン */
      --accent-2:#5da8ff;   /* ネオンブルー */
      --shadow:0 12px 30px rgba(0,0,0,.35);
    }

    *{ box-sizing:border-box }
    html,body{ height:100% }

    body {
      font-family: "Noto Serif JP", serif;
      margin: 0;
      padding: 0;
      background: var(--bg);
      color: var(--fg);
      overflow-x:hidden;
    }

    /* ---- 背景層：グラデ + ゆっくり動く光だまり ---- */
    .bg {
      position:fixed; inset:0; z-index:-20;
      background:
        radial-gradient(1200px 700px at 12% 20%, rgba(84,214,163,.25), transparent 60%),
        radial-gradient(900px 600px at 85% 75%, rgba(93,168,255,.22), transparent 55%),
        linear-gradient(180deg, #06080c 0%, #0a0d12 60%, #0a0d12 100%);
    }
    .bg::before, .bg::after{
      content:""; position:absolute; inset:-20%;
      background:
        radial-gradient(40% 30% at 30% 40%, rgba(84,214,163,.12), transparent 60%),
        radial-gradient(40% 30% at 70% 60%, rgba(93,168,255,.10), transparent 65%);
      filter: blur(20px);
      animation: floatGlow 24s ease-in-out infinite alternate;
      opacity:.9;
    }
    .bg::after{
      animation-duration: 32s;
      animation-delay: -8s;
      transform: rotate(12deg);
      opacity:.7;
    }
    @keyframes floatGlow {
      0%{ transform: translate3d(0,0,0) scale(1); }
      100%{ transform: translate3d(2.5%, -2.5%, 0) scale(1.04); }
    }

    /* ---- ナビ（グラス + ブラー + 輝度差） ---- */
    nav {
      position: fixed; top: 0; left: 0; width: 100%;
      background:
        linear-gradient(180deg, rgba(0,0,0,.35), rgba(0,0,0,.10)),
        var(--glass);
      border-bottom: 1px solid var(--border);
      backdrop-filter: blur(12px);
      -webkit-backdrop-filter: blur(12px);
      color: var(--fg);
      padding: 12px 24px;
      z-index: 999;
      font-size: 18px;
      display: flex;
      gap: 20px;
      align-items:center;
      box-shadow: var(--shadow);
    }

    nav a {
      color: var(--fg);
      text-decoration: none;
      padding: 8px 10px;
      border-radius: 10px;
      position:relative;
      transition: transform .15s ease, background .15s ease;
    }
    nav a:hover{
      background: rgba(255,255,255,.06);
      transform: translateY(-1px);
    }
    /* ネオン下線 */
    nav a::after{
      content:"";
      position:absolute; left:10px; right:10px; bottom:4px; height:2px;
      background: linear-gradient(90deg, var(--accent), var(--accent-2));
      border-radius:2px;
      opacity:0; transform: scaleX(.6);
      transition: opacity .2s ease, transform .2s ease;
    }
    nav a:hover::after{ opacity:1; transform: scaleX(1); }

    .container {
      padding: 110px 20px 40px;
      max-width: 880px;
      margin: 0 auto;
    }

    h1 {
      font-size: clamp(26px, 4vw, 34px);
      margin-bottom: 16px;
      letter-spacing:.02em;
      text-shadow: 0 10px 30px rgba(0,0,0,.35);
    }

    /* ---- カード（グラス + ネオン縁取り） ---- */
    .card {
      margin: 28px 0;
      padding: 20px;
      border: 1px solid var(--border);
      background: linear-gradient(180deg, rgba(255,255,255,.06), rgba(255,255,255,.02));
      backdrop-filter: blur(10px);
      -webkit-backdrop-filter: blur(10px);
      border-radius: 16px;
      box-shadow: var(--shadow);
      position:relative;
      overflow:hidden;
      transition: transform .2s ease, box-shadow .2s ease, border-color .2s ease;
    }

    /* カードの光る縁（細） */
    .card::before{
      content:"";
      position:absolute; inset:0; pointer-events:none;
      background:
        linear-gradient(135deg, rgba(84,214,163,.22), rgba(93,168,255,.22));
      mask:
        linear-gradient(#000, #000) content-box,
        linear-gradient(#000, #000);
      -webkit-mask:
        linear-gradient(#000, #000) content-box,
        linear-gradient(#000, #000);
      padding:1px; border-radius:16px;
      -webkit-mask-composite: xor; mask-composite: exclude;
      opacity:.6;
    }

    .card:hover{
      transform: translateY(-2px);
      border-color: rgba(93,168,255,.45);
      box-shadow: 0 18px 40px rgba(0,0,0,.45);
    }

    .contact-section h2,
    .email-section h2{
      margin: 0 0 10px;
      font-size: 20px;
    }

    .contact-section p,
    .email-section p{
      margin: 0; line-height:1.8; color: var(--muted);
    }

    /* 「X」カードはアクセントカラー寄り */
    .contact-section { border-left: 4px solid var(--accent-2); }
    .email-section   { border-left: 4px solid rgba(255,255,255,.35); }

    .contact-section a {
      color: var(--accent-2);
      font-weight: bold;
      text-decoration: none;
      position:relative;
    }
    .contact-section a::after{
      content:""; position:absolute; left:0; right:0; bottom:-2px; height:2px;
      background: linear-gradient(90deg, var(--accent-2), transparent);
      opacity:.8; transition: transform .18s ease; transform: scaleX(.7);
      transform-origin:left center;
    }
    .contact-section a:hover::after{ transform: scaleX(1); }

    .email-section a {
      color: var(--fg);
      text-decoration: none;
      font-weight: bold;
      position:relative;
    }
    .email-section a:hover{ text-shadow: 0 0 10px rgba(255,255,255,.45); }
    .email-section a::after{
      content:""; position:absolute; left:0; right:0; bottom:-3px; height:2px;
      background: linear-gradient(90deg, var(--accent), transparent);
      opacity:.6; transition: transform .18s ease; transform: scaleX(.65);
      transform-origin:left center;
    }
    .email-section a:hover::after{ transform: scaleX(1); }

    /* 小さめ画面調整 */
    @media (max-width: 720px){
      nav{ font-size:16px; gap:14px; }
      .container{ padding-top: 96px; }
    }

    /* p5キャンバスの層（クリック無効） */
    canvas.p5-layer{
      position: fixed;
      inset: 0;
      pointer-events: none;
      z-index: -10;
    }
  </style>
</head>

<body>
  <div class="bg" aria-hidden="true"></div>

  <nav>
    <a href="index.html">Home</a>
    <a href="schedule.html">Schedule</a>
    <a href="contact.html">Contact</a>
    <a href="qa.html">Q&A</a>
  </nav>

  <div class="container">
    <h1>お問い合わせ・SNS</h1>

    <!-- 公式X -->
    <div class="card contact-section">
      <h2>公式X（旧Twitter）</h2>
      <p>
        最新情報や活動報告を、京都府立医科大学 数学研究部の公式アカウントで発信しています。<br>
        ▶ <a href="https://twitter.com/kpum_mathclub" target="_blank" rel="noopener">@kpum_mathclub</a>
      </p>
    </div>

    <!-- メールアドレス -->
    <div class="card email-section">
      <h2>メールでのお問い合わせ</h2>
      <p>
        ご質問・連絡などは以下のアドレスまでご連絡ください：<br>
        ▶ <a href="mailto:mb221010@stu.kpu-m.ac.jp">mb221010@stu.kpu-m.ac.jp</a>
      </p>
    </div>
  </div>

  <script>
  /* ========= p5: 近未来ネオン粒子（既存アイデアを強化） =========
     - ボール概念は維持
     - 加法合成で発光、尾を残す
     - 長押しで 3x ブーストは継続
     - 色相がゆっくり循環（未来感アップ）
  */
  new p5(p => {
    const ballCount = 40;
    const balls = [];
    let isPressing = false;
    let hueBase = 170; // 初期色相（青〜緑）

    class Ball {
      constructor() {
        this.r = p.random(10, 26);
        this.x = p.random(this.r, p.windowWidth - this.r);
        this.y = p.random(this.r, p.windowHeight - this.r);
        this.baseVx = p.random(-1, 1);
        this.baseVy = p.random(-1, 1);
        this.vx = this.baseVx;
        this.vy = this.baseVy;
        this.hueShift = p.random(-20, 20);
      }
      move() {
        const boost = isPressing ? 3 : 1;
        this.vx = this.baseVx * boost;
        this.vy = this.baseVy * boost;

        this.x += this.vx;
        this.y += this.vy;

        if (this.x - this.r < 0) { this.x = this.r; this.baseVx *= -1; }
        if (this.x + this.r > p.width) { this.x = p.width - this.r; this.baseVx *= -1; }
        if (this.y - this.r < 0) { this.y = this.r; this.baseVy *= -1; }
        if (this.y + this.r > p.height) { this.y = p.height - this.r; this.baseVy *= -1; }
      }
      draw() {
        // ネオンの外側グロー
        p.noStroke();
        const h = (hueBase + this.hueShift + 360) % 360;
        p.fill(`hsla(${h}, 90%, 60%, 0.12)`);
        p.ellipse(this.x, this.y, this.r * 4.5);
        // コア（明るい）
        p.fill(`hsla(${h}, 95%, 70%, 0.85)`);
        p.ellipse(this.x, this.y, this.r * 1.8);
        // 核
        p.fill(`hsla(${h}, 100%, 95%, 0.9)`);
        p.ellipse(this.x, this.y, this.r * 0.9);
      }
    }

    p.setup = () => {
      const canvas = p.createCanvas(p.windowWidth, p.windowHeight);
      canvas.addClass('p5-layer');
      canvas.position(0, 0);
      p.colorMode(p.HSL);
      p.pixelDensity(Math.min(2, p.pixelDensity())); // モバイル負荷抑制

      // 加法合成で発光感
      p.blendMode(p.ADD);

      for (let i = 0; i < ballCount; i++) {
        balls.push(new Ball());
      }
    };

    p.draw = () => {
      // ゆっくり色相変化（未来感）
      hueBase = (hueBase + 0.1) % 360;

      // 尾を残すクリア（完全消去ではなくフェード）
      p.noStroke();
      p.fill(10, 15, 20, 0.12); // 透明度の低い暗色で薄く上書き
      p.rect(0, 0, p.width, p.height);

      for (let ball of balls) {
        ball.move();
        ball.draw();
      }
    };

    p.windowResized = () => {
      p.resizeCanvas(p.windowWidth, p.windowHeight);
    };

    // 長押しイベント（既存仕様を維持）
    p.mousePressed = () => { isPressing = true; };
    p.mouseReleased = () => { isPressing = false; };
    p.touchStarted = () => { isPressing = true; };
    p.touchEnded = () => { isPressing = false; };
  });
  </script>
</body>
</html>
